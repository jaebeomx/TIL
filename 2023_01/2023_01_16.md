# 2023_01_16 TIL

### ëª¨ë“ˆ ë²ˆë“¤ëŸ¬ (Module Bundler)

ì›¹ ê°œë°œì—ì„œ ë¶„ë¦¬ëœ íŒŒì¼ì„ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ ë³‘í•©í•˜ëŠ” ê°œë°œ ë„êµ¬ì´ë‹¤. ì´ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ì„ ìµœì í™”í•˜ê³  ìœ ì§€ë³´ìˆ˜ë¥¼ ìš©ì´í•˜ê²Œ ë§Œë“œëŠ” ë° ì‚¬ìš©ëœë‹¤.

ì›¹íŒ©, ë¡¤ì—…, Esbuild(Viteì˜ ëª¨ë“ˆ ë²ˆë“¤ëŸ¬) ë“±ì´ ëŒ€í‘œì ì¸ ëª¨ë“ˆ ë²ˆë“¤ëŸ¬ ë„êµ¬ì´ë©° ì´ë“¤ ë„êµ¬ëŠ” ê°ê° ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ë²ˆë“¤ë§ì„ ìˆ˜í–‰í•œë‹¤.

CRA(Create React App), Vite ë“±ì„ ìŠ¤íƒ€í„° í‚¤íŠ¸(Starter Kit) ë¼ê³  ë¶€ë¥¸ë‹¤.

# Redux

---

ReduxëŠ” Reactì—ì„œë§Œ ì“°ëŠ”ê²Œ ì•„ë‹ˆë‹¤.<br>
ReduxëŠ” ì–´ë–¤ ìë°”ìŠ¤í¬ë¦½íŠ¸ í”„ë¡œì íŠ¸ì—ì„œë„ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.(ex. Angular, Vue.js, Vanilla Javascript) ReduxëŠ” Reactì™€ëŠ” ë³„ê°œë‹¤.

Reduxê°€ ì™œ ë§Œë“¤ì–´ì¡Œê³  Reduxë¥¼ ì‚¬ìš©í•˜ë©´ ì¢‹ì€ ì´ì ë“¤ì´ ë¬´ì—‡ì¼ê¹Œ?

vanilla jsì—ì„œ Reduxë¥¼ ì‚¬ìš©í•´ë³´ì.

> npm install redux

```JS
import {createStore} from "redux"
```

storeëŠ” ìš°ë¦¬ì˜ data(state)ë¥¼ ì €ì¥í•˜ëŠ” ê²ƒì´ë‹¤. stateëŠ” ìš°ë¦¬ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°”ë€ŒëŠ” dataë¥¼ ë§í•œë‹¤. ì•„ë˜ì˜ ì½”ë“œì—ì„œëŠ” countê°€ stateê°€ ëœë‹¤.

```JS
import { createStore } from "redux";

const add = document.getElementById("add");
const minus = document.getElementById("minus");
const number = document.querySelector("span");

let count = 0;
number.innerText = count;

const updateText = () => {
  number.innerText = count;
};

const handleAdd = () => {
  count++;
  updateText();
};

const handleMinus = () => {
  count--;
  updateText();
};

add.addEventListener("click", handleAdd);
minus.addEventListener("click", handleMinus);
```

Reduxì—ëŠ” createStoreë¼ëŠ” í•¨ìˆ˜ê°€ ìˆëŠ”ë° storeê°€ í•˜ëŠ” ì¼ì€ ê¸°ë³¸ì ìœ¼ë¡œ dataë¥¼ ë„£ì„ ìˆ˜ ìˆëŠ” ì¥ì†Œë¥¼ ìƒì„±í•œë‹¤.
<br>**ë°ì´í„°ëŠ” store ì´ë¼ëŠ” ê³³ì— ì €ì¥ ë˜ì–´ì•¼ í•¨**

---

### 1. createStore

Reduxì˜ createStore í•¨ìˆ˜ëŠ” **Redux ìŠ¤í† ì–´ë¥¼ ìƒì„±í•˜ëŠ” ì—­í• **ì„ í•œë‹¤. ìŠ¤í† ì–´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì—­ ìƒíƒœë¥¼ ë‹´ë‹¹í•˜ë©°, ì´ë¥¼ í†µí•´ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  ì—…ë°ì´íŠ¸í•œë‹¤. ì‰½ê²Œ ë§í•´ **storeëŠ” ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ê³µê°„**ì´ë‹¤.

#### storeë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„  createStore()ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ reducerë¥¼ ë§Œë“¤ì–´ ì¤˜ì•¼í•œë‹¤

### ğŸš¨**reducer**ì€ í•¨ìˆ˜ì¸ë° **dataë¥¼ ì°¾ê³  ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜**ì´ë‹¤.<br>

**reducerì˜ returnê°’ì€ ê³§ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°ì´í„°**ê°€ ëœë‹¤.
**ë¦¬ë•ìŠ¤ì—ì„œ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ì˜¤ì§ ë¦¬ë“€ì„œ ë°–ì— ì—†ë‹¤**

```JS
import { createStore } from "redux";

const countModifier = () => {
  return "Hello";
};

const countStore = createStore(countModifier);

console.log(countStore.getState()); // Hello
```

ë˜ëŠ” ì´ˆê¸°í™”ë¥¼ ì´ë ‡ê²Œ í•´ì¤„ ìˆ˜ë„ ìˆë‹¤.

```JS
const countModifier = (state = 0) => {
  return state;
};

const countStore = createStore(countModifier);
console.log(countStore.getState()); // 0
```

ì •ë¦¬: StoreëŠ” dataë¥¼ ì €ì¥í•˜ëŠ” ê³³ì´ê³ , CreateStoreëŠ” Reducerë¥¼ ìš”êµ¬í•œë‹¤. ReducerëŠ” dataë¥¼ ë³€ê²½í•´ì£¼ëŠ” í•¨ìˆ˜ë¡œ Reducerê°€ return í•˜ëŠ” ê²ƒì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ìˆëŠ” dataê°€ ë¨.

#### Reducer í•¨ìˆ˜ëŠ” í˜„ì¬ì˜ ìƒíƒœì™€ ì•¡ì…˜ì„ ì¸ìë¡œ ë°›ì•„ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë‹¤.

---

### Actions

#### Actionì€ ë¦¬ë“€ì„œì™€ ì†Œí†µí•˜ëŠ” ë°©ë²•ì´ë‹¤.

Reduxì—ì„œ **ì•¡ì…˜ì€ ìŠ¤í† ì–´ì˜ ìƒíƒœì— ì–´ë–¤ ë³€í™”ê°€ í•„ìš”í•œì§€ ëª…ì‹œí•´ë†“ì€ ê°ì²´**ì´ë‹¤. ì•¡ì…˜ ê°ì²´ëŠ” type í•„ë“œë¥¼ í•„ë“œë¥¼ í•„ìˆ˜ì ìœ¼ë¡œ ê°€ì§€ê³  ìˆìœ¼ë©°
action ê°ì²´ëŠ” dispatch í•¨ìˆ˜ë¥¼ í†µí•´ ì „ë‹¬ëœë‹¤. dispatch í•¨ìˆ˜ê°€ ì•¡ì…˜ì„ ìŠ¤í† ì–´ì— ì „ë‹¬í•˜ë©´, ìŠ¤í† ì–´ëŠ” ë¦¬ë“€ì„œë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤. ë¦¬ë“€ì„œëŠ” í˜„ì¬ì˜ ìƒíƒœì™€ ì „ë‹¬ë°›ì€ ì•¡ì…˜ ê°ì²´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë§Œë“¤ì–´ì„œ ë°˜í™˜í•œë‹¤.

#### Reducerì—ê²Œ actionì„ ë³´ë‚´ëŠ” ë°©ë²•ì€ storeì˜ dispatch í•¨ìˆ˜ë¥¼ í†µí•´ ê°€ëŠ¥í•˜ë‹¤.

```JS
const countModifier = (count = 0, action) => {
  if (action.type === "ADD") {
    // ë¦¬ë“€ì„œê°€ return í•˜ëŠ” ëª¨ë“  ê²ƒì€ dataê°€ ëœë‹¤.
    return count+1;
  }
  console.log(action); // {type: "ADD"}
  return count++;
};

const countStore = createStore(countModifier);
// Store.dispatch(ì•¡ì…˜)ì„ ë§í•˜ë©´ Reduxê°€ ë¦¬ë“€ì„œì—ê²Œ ë©”ì„¸ì§€ë¥¼ ë³´ë‚¸ë‹¤.
countStore.dispatch({ type: "ADD" });

countStore.getState() // 1
```

#### dispatchëŠ” ì•¡ì…˜ì„ ë°œìƒì‹œí‚¤ëŠ” ì—­í• ì„ í•œë‹¤.

**dispatch(action)ê³¼ ê°™ì´ í˜¸ì¶œí•˜ë©´ ìŠ¤í† ì–´ëŠ” ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œì¼œ í•´ë‹¹ ì•¡ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì´ ìˆë‹¤ë©´ ì•¡ì…˜ì„ ì°¸ê³ í•˜ì—¬ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.**

ë˜ ë‹¤ë¥¸ ì˜ˆì‹œë¡œëŠ”

```JS
import { createStore } from "redux";

const countModifier = (count = 0, action) => {
  if (action.type === "ADD") {
    return count + 1;
  } else if (action.type === "MINUS") {
    return count - 1;
  }
  return count;
};

const countStore = createStore(countModifier);
countStore.dispatch({ type: "ADD" });
countStore.dispatch({ type: "ADD" });
countStore.dispatch({ type: "ADD" });
countStore.dispatch({ type: "ADD" });
countStore.dispatch({ type: "ADD" });
countStore.dispatch({ type: "MINUS" });

console.log(countStore.getState()); // 4
```

ì •ë¦¬: Actionì€ ë¦¬ë•ìŠ¤ì˜ ë¦¬ë“€ì„œ í•¨ìˆ˜ê°€ ë°›ëŠ” ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ê³ , ë¦¬ë“€ì„œ í•¨ìˆ˜ëŠ” ì´ ì•¡ì…˜ ê°ì²´ë¥¼ ë°›ì•„ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ìƒì„±í•œë‹¤.

---

### subscribe

subscribeëŠ” ìš°ë¦¬ì—ê²Œ store ì•ˆì— ìˆëŠ” ë³€í™”ë“¤ì„ ì•Œ ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.
**ìŠ¤í† ì–´ì˜ ë‚´ì¥ í•¨ìˆ˜ ì¤‘ í•˜ë‚˜ë¡œ, ìƒíƒœê°€ ë³€í™”í•  ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ë¥¼ ë“±ë¡í•˜ëŠ” ì—­í• **ì„ í•œë‹¤.<br>
(storeì˜ ë‚´ì¥í•¨ìˆ˜ì—ëŠ” getState(), subscribe(listener), replaceReducer(nextReducer), dispatch()ì™€ ê°™ì€ ë‚´ì¥í•¨ìˆ˜ë“¤ì´ ìˆë‹¤.)

#### ë¦¬ë•ìŠ¤ì—ì„œ subscribe í•¨ìˆ˜ëŠ” ìŠ¤í† ì–´ì˜ ìƒíƒœê°€ ë³€í•  ë•Œë§ˆë‹¤ í˜¸ì¶œë˜ëŠ” ë¦¬ìŠ¤ë„ˆ í•¨ìˆ˜ë¥¼ ë“±ë¡í•œë‹¤

```JS
const store = createStore(reducer); // ë¦¬ë“€ì„œë¥¼ ì´ìš©í•´ ìŠ¤í† ì–´ë¥¼ ìƒì„±.

store.subscribe(() => {
  console.log(store.getState()); // ìƒíƒœê°€ ë³€í•  ë•Œë§ˆë‹¤ í˜„ì¬ ìƒíƒœë¥¼ ì½˜ì†”ì— ì¶œë ¥.
});

store.dispatch(action); // ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜í•˜ì—¬ ìƒíƒœë¥¼ ë³€ê²½.
```

ì •ë¦¬: subscribeëŠ” store ì•ˆì— ìˆëŠ” ë³€í™”ë¥¼ ê°ì§€í•˜ëŠ”ë° ë³€í™”ë¥¼ ê°ì§€í•˜ë©´ listner í•¨ìˆ˜ ì‹¤í–‰.

---

### switch case

#### ë¦¬ë•ìŠ¤ì˜ ê³µì‹ë¬¸ì„œë¥¼ ë³´ë©´ ë³´í†µ ë¦¬ë“€ì„œì˜ ìƒíƒœì— ê´€í•´ì„œ ì–˜ê¸°í•  ë•ŒëŠ” swtichë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤. ë”°ë¼ì„œ swtich (action.type){case "example": return "example2"} ì´ë ‡ê²Œ ì‘ì„±í•˜ë©´ ëœë‹¤.

```JS
const countModifier = (count = 0, action) => {
  switch (action.type) {
    case "ADD":
      return count + 1;
    case "MINUS":
      return count - 1;
    default:
      return count;
  }
};
```

> < Recap ><br>
> âœ… reducer : í˜„ì¬ ìƒíƒœì˜ applicationê³¼ í•¨ê»˜ ë¶ˆë ¤ì§€ëŠ” function (+ with action)<br>
> returní•˜ëŠ” ê²ƒì€ applicationì˜ stateê°€ ë¨<br>
> âœ… action : reducerì™€ ì†Œí†µí•˜ëŠ” ë°©ë²•ìœ¼ë¡œ Objectì—¬ì•¼ í•˜ë©° ê·¸ key ì´ë¦„ì€ í•­ìƒ typeì„ (ë°”ê¿€ ìˆ˜ ì—†ìŒ)<br>
> âœ… dispatch : reducerì—ê²Œ actionì„ ë³´ë‚´ëŠ” ë°©ë²•<br>
> âœ… subscribe : storeì˜ ë³€í™”ë¥¼ ê°ì§€í•˜ë©´ ì¸ìê°’ìœ¼ë¡œ ì¤€ í•¨ìˆ˜ë¥¼ ì‹¤í–‰

---

#### storeë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ìœ ì¼í•œ ë°©ë²•ì€ actionì„ ë³´ë‚´ëŠ” ë°©ë²• ë¿ì´ë‹¤.

#### ê·¸ë¦¬ê³  ì ˆëŒ€ stateë¥¼ mutateí•˜ì§€ ë§ì•„ì•¼í•œë‹¤. ëŒ€ì‹ ì— new state objectë¥¼ ë¦¬í„´ í•´ì•¼í•œë‹¤.

```JS
// mutationì´ë€?
const friends= ["dal"];
firends.push("lynn");
```

```JS
const reducer = (state = [], action) => {
  console.log(action);
  switch (action.type) {
    case ADD_TODO:
        // ì´ë ‡ê²Œ mutate í•˜ë©´ ì•ˆë¨. ìƒˆë¡œìš´ arrayë¥¼ ë§Œë“¤ì–´ì•¼í•¨
      return state.push(action.text);
    case DELETE_TODO:
      return [];
    default:
      return state;
  }
};

const store = createStore(reducer);
```

```JS
const reducer = (state = [], action) => {
  console.log(action);
  switch (action.type) {
    case ADD_TODO:
        // ì´ì „ arrayì˜ ì»¨í…ì¸ ë¡œ ê·¸ë¦¬ê³  ìƒˆë¡œìš´ objectë¡œ arrayë¥¼ ë§Œë“  ê²ƒ
      return [...state, { text: action.text }];
    case DELETE_TODO:
      return [];
    default:
      return state;
  }
};

const store = createStore(reducer);

store.subscribe(() => console.log(store.getState()));
```
