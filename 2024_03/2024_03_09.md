# 2024.03.09 TIL

## ðŸ“šJavaScript

### ðŸš¨ fetch()

#### ðŸ“Œì„œë²„ ë‹¨ì—ì„œì˜ API í˜¸ì¶œê³¼ í´ë¼ì´ì–¸íŠ¸ ë‹¨ì—ì„œì˜ API í˜¸ì¶œì˜ ì°¨ì´

ì„œë²„ë‹¨ API ìš”ì²­ì€ ì„œë²„ í™˜ê²½ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œì— ì˜í•´ ì´ë£¨ì–´ì§„ë‹¤. ì´ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë°±ì—”ë“œ í”„ë ˆìž„ì›Œí¬ë‚˜ ëŸ°íƒ€ìž„ í™˜ê²½(Node.js, Django, Flask ë“±)ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œì— í•´ë‹¹í•œë‹¤. ì´ëŸ° ìš”ì²­ì€ ì„œë²„ì—ì„œ ì§ì ‘ API ì„œë²„ë¡œ ì „ì†¡ë˜ì–´, ì´ ê³¼ì •ì—ì„œ í•„ìš”í•œ ì¸ì¦ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ë³´ê´€í•  ìˆ˜ ìžˆë‹¤.

ë°˜ë©´ í´ë¼ì´ì–¸íŠ¸ë‹¨ API ìš”ì²­ì€ í´ë¼ì´ì–¸íŠ¸ í™˜ê²½, ì¦‰ ì‚¬ìš©ìžì˜ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ë˜ëŠ” JavaScript ì½”ë“œì— ì˜í•´ ì´ë£¨ì–´ì§„ë‹¤. ì´ëŸ¬í•œ ìš”ì²­ì€ Ajaxë‚˜ Fetch API, Axios ë“±ì˜ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬ëœë‹¤. í´ë¼ì´ì–¸íŠ¸ë‹¨ì—ì„œ APIë¥¼ í˜¸ì¶œí•˜ë©´, ì‚¬ìš©ìžì˜ ë¸Œë¼ìš°ì €ëŠ” ì§ì ‘ API ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê³  ì‘ë‹µì„ ë°›ëŠ”ë‹¤.

#### ì„œë²„ ë‹¨ì—ì„œì˜ ìš”ì²­ì€ ë¸Œë¼ìš°ì €ì˜ CORS ì œí•œì„ ë°›ì§€ ì•ŠëŠ”ë‹¤. ë˜í•œ ì„œë²„ ë‹¨ì—ì„œëŠ” ë¯¼ê°í•œ ì¸ì¦ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ë³´ê´€í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìžˆë‹¤.

---

### ðŸš¨ fetch ì‚¬ìš©ë²•

ì²« ë²ˆì§¸ ì¸ìžë¡œ URL, ë‘ ë²ˆì§¸ ì¸ìžë¡œ ì˜µì…˜ ê°ì²´ë¥¼ ë°›ê³  Promise ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. ë°˜í™˜ëœ ê°ì²´ëŠ” API í˜¸ì¶œì´ ì„±ê³µí–ˆì„ ê²½ìš° ì‘ë‹µ(response) ê°ì²´ë¥¼ resolveí•˜ê³ , ì‹¤íŒ¨í–ˆì„ ê²½ìš°ì—ëŠ” ì˜ˆì™¸(error)ê°ì²´ë¥¼ rejectí•œë‹¤.

```js
fetch(url, options)
  .then((response) => console.log("response:", response))
  .catch((error) => console.log("error:", error));
```

ì˜µì…˜(option) ê°ì²´ì—ëŠ” HTTP ë°©ì‹(method), HTTP ìš”ì²­ í—¤ë”(headers), HTTP ìš”ì²­ ì „ë¬¸(body)ë“±ì„ ì„¤ëª…í•´ì¤„ ìˆ˜ ìž‡ë‹¤. ì‘ë‹µ(response) ê°ì²´ë¡œë¶€í„°ëŠ” HTTP ì‘ë‹µ ìƒíƒœ, HTTP ì‘ë‹µ í—¤ë”(header), HTTP ì‘ë‹µ ì „ë¬¸(body)ë“±ì„ ì½ì–´ì˜¬ ìˆ˜ ìžˆë‹¤.

ì°¸ê³ ë¡œ fetch()í•¨ìˆ˜ëŠ” ë¸Œë¼ìš°ì €ì˜ window ê°ì²´ì— ì†Œì†ë˜ì–´ ìžˆê¸° ë•Œë¬¸ì— window.fetch()ë¡œ ì‚¬ìš©ë˜ê¸°ë„ í•œë‹¤.

---

### ðŸš¨ GET í˜¸ì¶œ

ë‹¨ìˆœížˆ ì›ê²© APIì— ìžˆëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ì“°ì´ëŠ” GET ë°©ì‹ì˜ HTTP í†µì‹ ì„ ì‚´íŽ´ë³´ìž.

fetch() í•¨ìˆ˜ëŠ” ë””í´íŠ¸ë¡œ GET ë°©ì‹ìœ¼ë¡œ ìž‘ë™í•˜ê³  GET ë°©ì‹ì€ ìš”ì²­ ì „ë¬¸(body)ë¥¼ ë°›ì§€ ì•Šê¸° ë•Œë¬¸ì— ì˜µì…˜ ì¸ìžê°€ í•„ìš” ì—†ë‹¤.

```js
fetch("https://jsonplaceholder.typicode.com/posts/1").then((response) =>
  console.log(response)
);
```

ì‘ë‹µ ê°ì²´ë¥¼ í†µí•´ ì‘ë‹µ ìƒíƒœê°€ 200 OK ì¸ê²ƒì„ ì•Œ ìˆ˜ ìžˆë‹¤.

```json
Response {status: 200, ok: true, redirected: false, type: "cors", url: "https://jsonplaceholder.typicode.com/posts/1", â€¦}
```

ëŒ€ë¶€ë¶„ì˜ REST APIë“¤ì€ JSON í˜•íƒœì˜ ë°ì´í„°ë¥¼ ì‘ë‹µí•˜ê¸° ë•Œë¬¸ì—, ì‘ë‹µ ê°ì²´ëŠ” json() ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.

```js
fetch("https://jsonplaceholder.typicode.com/posts/1")
  .then((response) => response.json())
  .then((data) => console.log(data));
```

ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì‘ë‹µ ê°ì²´ë¡œë¶€í„° JSON í¬ë§·ì˜ ì‘ë‹µ ì „ë¬¸(body)ì„ ìžë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ ì–»ì„ ìˆ˜ ìžˆë‹¤.

```json
{
  "userId": 1,
  "id": 1,
  "title": "sunt aut facere repellat provident occaecati excepturi optio reprehenderit",
  "body": "quia et suscipitâ†µsuscipit recusandae consequuntur â€¦strum rerum est autem sunt rem eveniet architecto"
}
```

---

### ðŸš¨ POST í˜¸ì¶œ

ì›ê²© APIì—ì„œ ê´€ë¦¬í•˜ê³  ìžˆëŠ” ë°ì´í„°ë¥¼ ìƒì„±í•´ì•¼ í•œë‹¤ë©´ ìš”ì²­ ì „ë¬¸ì„ í¬í•¨í•  ìˆ˜ ìžˆëŠ” POST ë°©ì‹ì˜ HTTP í†µì‹ ì´ í•„ìš”í•  ê²ƒì´ë‹¤.

method ì˜µì…˜ì„ POSTë¡œ ì§€ì •í•´ì£¼ê³ , headers ì˜µì…˜ì„ í†µí•´ JSON í¬ë§·ì„ ì‚¬ìš¯ì•ˆë‹¤ê³  ì•Œë ¤ì¤˜ì•¼í•˜ë©°, ìš”ì²­ ì „ë¬¸ì„ JSON í¬ë§·ìœ¼ë¡œ ì§ë ¬í™”í•˜ì—¬ ê°€ìž¥ ì¤‘ìš”í•œ body ì˜µì…˜ì— ì„¤ì •í•´ì¤€ë‹¤.

```js
fetch("https://jsonplaceholder.typicode.com/posts", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
  },
  body: JSON.stringify({
    title: "Test",
    body: "I am testing!",
    userId: 1,
  }),
}).then((response) => console.log(response));
```

---

### ðŸš¨ PUT, DELETE í˜¸ì¶œ

GETê³¼ POST ë§Œí¼ì€ ì•„ë‹ˆì§€ë§Œ, ì›ê²© APIì—ì„œ ê´€ë¦¬í•˜ëŠ” ë°ì´í„°ì˜ ìˆ˜ì •ê³¼ ì‚­ì œë¥¼ ìœ„í•´ PUTê³¼ DELETE ë°©ì‹ì˜ HTTP í˜¸ì¶œì„ í•´ì•¼í•  ë•Œê°€ ìžˆë‹¤.

```js
fetch("https://jsonplaceholder.typicode.com/posts/1", {
  method: "PUT",
  headers: {
    "Content-Type": "application/json",
  },
  body: JSON.stringify({
    title: "Test",
    body: "I am testing!",
    userId: 1,
  }),
})
  .then((response) => response.json())
  .then((data) => console.log(data));
```
