# 2024.03.31 TIL

## 📚 DOM 요소의 이벤트 버블링(event bubbling)

이벤트 버블링은 DOM 요소에서 발생한 이벤트가 자식 요소부터 부모 요소 순서대로 전파되는 현상이다.

예시를 살펴보자면

```html
<div onclick="alert('div에 할당한 핸들러!')">
  <em
    ><code>EM</code>을 클릭했는데도 <code>DIV</code>에 할당한 핸들러가
    동작합니다.</em
  >
</div>
```

핸들러는 div에 할당되어 있지만, em이나 code 같은 중첩 태그를 클릭해도 동작한다.

---

### 🚨 버블링

버블링(bubbling)의 원리는 간단하다.

한 요소에 이벤트가 발생하면, 이 요소에 할당된 핸들러가 동작하고, 이어서 부모 요소의 핸들러가 동작한다. 가장 최상단의 조상 요소를 만날 때까지 이 과정이 반복되면서 요소 각각에 할당된 핸들러가 동작한다.

#### 이런 흐름을 "이벤트 버블링"이라고 부른다. 이벤트가 제일 깊은 곳에 있는 요소에서 시작해 부모 요소를 거슬러 올라가며 발생하는 모양이 마치 물속 거품과 닮았기 때문이다.

거의 모든 이벤트는 버블링 된다.

focus 이벤트와 같이 버블링 되지 않는 이벤트도 있다.

---

### 🚨 버블링 중단하기

이벤트 버블링은 타깃 이벤트에서 시작해서 html 요소를 거쳐 document 객체를 만날 때까지 각 노드에서 모두 발생한다.

그런데 핸들러에게 이벤트를 완전히 처리하고 난 후 버블링을 중단하도록 명령할 수도 있다.

#### ❗️event.stopPropagation()

이 이벤트 객체 메서드를 사용하면

```html
<body onclick="alert(`버블링은 여기까지 도달하지 못합니다.`)">
  <button onclick="event.stopPropagation()">클릭해 주세요.</button>
</body>
```

다음과 같은 예시에서 button을 클릭해도 body.onclick은 동작하지 않는다.

---

#### 📌 꼭 필요한 경우를 제외하곤 버블링을 막지 말자!

버블링은 유용하다. 버블링을 꼭 멈춰야 하는 명백한 상황이 아니라면 버블링을 막지 말자.
