# 2024.03.29 TIL

## ğŸ“š redux-toolkit

### ğŸš¨ store.js

configureStore ì´ë¼ëŠ” ì¹œêµ¬ê°€ reducerë¥¼ ê°ì‹¸ê³  ìˆëŠ”ë° ì €ê¸°ì„œ ëª¨ë“  stateë¥¼ ê´€ë¦¬í•  ê²ƒì´ë‹¤.

reducerê°€ ë¹„ì–´ìˆëŠ”ë° ì €ê¸°ë‹¤ê°€ ì´ì œ ìƒíƒœê´€ë¦¬í•  ê²ƒë“¤ì„ ì €ì¥í•œë‹¤.

```js
import React from "react";
import { configureStore } from "@reduxjs/toolkit";

export default configureStore({
  reducer: {},
});
```

---

### ğŸš¨ index.js

ì´ì œ ìŠ¤í† ì–´ë¥¼ index.jsì— ì—°ê²°ì‹œì¼œ ì¤˜ì•¼í•˜ëŠ”ë° ê·¸ëŸ¬ë ¤ë©´ index.jsì—ë‹¤ê°€ Providerë¼ëŠ”ê±¸ë¡œ ê°ì‹¸ì¤˜ì•¼í•œë‹¤. ProviderëŠ” storeê°€ ë¦¬ì•¡íŠ¸ ì•± ì „ì²´ë¥¼ ê°ì‹¸ë„ë¡ í•´ì£¼ëŠ” ì• ë‹¤.

```js
// index.js
import React from "react";
import ReactDOM from "react-dom";
import App from "./App";
import store from "./redux/store";
import { Provider } from "react-redux";

ReactDOM.render(
  <React.StrictMode>
    <Provider store={store}>
      <App />
    </Provider>
  </React.StrictMode>,
  document.getElementById("root")
);
```

ìœ„ ì½”ë“œë¥¼ ë³´ë©´ Providerë¼ëŠ” ì¹œêµ¬ê°€ app.jsë¥¼ ê°ì‹¸ê³  ìˆê³  storeë¼ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬í•´ ì¤€ë‹¤. ì € íŒŒë¼ë¯¸í„°ë¥¼ ì „í•´ì£¼ì§€ ì•Šìœ¼ë©´ ë¦¬ì•¡íŠ¸ëŠ” storeê°€ ë­”ì§€ ëª¨ë¥´ë¯€ë¡œ ê¼­ ì¶”ê°€í•´ì¤˜ì•¼í•œë‹¤.

---

### ğŸš¨ ë¦¬ë“€ì„œ ë§Œë“¤ê¸°

ìŠ¤í† ì–´ê°€ ì‹ë‹¹ì´ë¼ê³  í•˜ë©´ ë¦¬ë“€ì„œëŠ” ì ‘ì‹œë‹¤. ì‹ë‹¹ì—ì„œ ìŒì‹ì„ ì£¼ë ¤ë©´ ì ‘ì‹œê°€ ìˆì–´ì•¼í•œë‹¤.

redux í´ë”ì— user.jsë¥¼ ë§Œë“¤ì–´ ì£¼ê³ 

```js
import { createSlice } from "@reduxjs/toolkit";

export const userSlice = createSlice({
  name: "user",
  initialState: { value: { name: "", age: 0, email: "" } },
  reducers: {
    login: (state, action) => {
      state.value = action.payload;
    },
  },
});

export default userSlice.reducer;
```

ì´ createSliceê°€ ê¸°ì¡´ì— createReducerì™€ createActionì´ í•˜ë˜ ì¼ì„ ê°™ì´ í•´ì¤€ë‹¤. ì‰½ê²Œ ë§í•´ actionsë¥¼ ìœ„í•œ js íŒŒì¼ì„ ë”°ë¡œ ë§Œë“¤ í•„ìš”ê°€ ì—†ë‹¤.

ì‚¬ìš©í•  ë¦¬ë“€ì„œì˜ ì´ë¦„ì„ ì •í•˜ê³  ê·¸ê±¸ createSliceë¡œ ì§€ì •í•´ì¤€ë‹¤.

- nameì€ ë¦¬ë“€ì„œ ì´ë¦„ì„ ë­˜ë¡œí• ì§€ ì •í•˜ëŠ” ê²ƒì´ê³ 
- initialStateëŠ” ë“¤ì–´ê°ˆ ë°ì´í„°ì˜ ì´ˆê¸°ê°’ì„ ì¡ì•„ì£¼ëŠ” ìš©ë„
- reducersëŠ” ìƒíƒœê°€ ë³€í•˜ë©´ ì–´ë–»ê²Œ ì‹¤í–‰í• ì§€ ì •ì˜í•˜ëŠ” ë¶€ë¶„ì´ë‹¤.

ë§Œì•½ ë¡œê·¸ì¸ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ì´ë¦„, ë‚˜ì´, ì´ë©”ì¼ì´ ë³€í•˜ê²Œ í•˜ê³ ì‹¶ë‹¤ë©´ ë¡œê·¸ì¸ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤. stateëŠ” ìš°ë¦¬ê°€ ì§‘ì–´ë„£ì€ ì´ˆê¸°ê°’ì˜ valueë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—­í• ì„ í•˜ê³  actionsì•ˆì—ëŠ” payloadë‘ typeì´ë¼ëŠ” ì¹œêµ¬ê°€ ìˆëŠ”ë° ìš°ë¦¬ê°€ ë°”ê¾¸ê³  ì‹¶ì€ ë°ì´í„°ë¥¼ ì›í•˜ëŠ” ê³³ì—ë‹¤ê°€ ë„˜ê²¨ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.

---

### ğŸš¨ ë¦¬ë“€ì„œë¥¼ ìŠ¤í† ì–´ì— ì €ì¥

```js
// store.js
import { configureStore } from "@reduxjs/toolkit";
import userReducer from "./user";

export default configureStore({
  reducer: {
    user: userReducer,
  },
});
```

ë¦¬ë“€ì„œë¥¼ ë§Œë“¤ì—ˆìœ¼ë©´ ìŠ¤í† ì–´ì— ì €ì¥í•´ì•¼í•œë‹¤. ì•ˆê·¸ëŸ¬ë©´ ì‘ë™ì„ ì•ˆí•œë‹¤.

---

### ğŸš¨ ì‹¤ì‚¬ìš©

```js
import { useSelector } from "react-redux";

const user = useSelector((state) => state.user.value);
```

ë¨¼ì € useSelectorë¼ëŠ” ê²ƒì„ import í•´ì˜¤ê³  ë°‘ì— ì €ë ‡ê²Œ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.

useSelectorë¥¼ ì´ìš©í•˜ë©´ ìš°ë¦¬ê°€ ë§Œë“  ë¦¬ë“€ì„œì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

ë¦¬ë“€ì„œì— ìˆëŠ” stateì— ì ‘ê·¼í• ê±´ë°, ì–´ëŠ stateëƒë©´ ì•„ê¹Œ userë¼ê³  ì´ë¦„ ì§€ì–´ì¤€ ë¦¬ë“€ì„œì— ìˆëŠ” stateì— ì ‘ê·¼í• ê±°ë€ ì†Œë¦¬ë‹¤. ê·¸ë¦¬ê³  user ë¦¬ë“€ì„œì— ìš°ë¦¬ê°€ ì´ˆê¸°ê°’ì„ ì–´ë–»ê²Œ ì„¤ì •í–ˆëŠ”ì§€ ë³´ë©´ valuefã…ê³  í•´ë†¨ë‹¤. ê·¸ë˜ì„œ userì— ìˆëŠ” valueë¥¼ ê°€ì ¸ì˜¬ê±°ë€ ëœ»ì´ë‹¤. ì´ì œ valueì— ìˆë˜ nameê³¼ age, emailì„ ë¶™ì—¬ì¤€ë‹¤.

```js
import React from "react";
import { useSelector } from "react-redux";

function Profile() {
  const user = useSelector((state) => state.user.value);
  return (
    <div>
      <h1>Profile Page</h1>
      <p> Name : {user.name} </p>
      <p> Age : {user.age} </p>
      <p> Email : {user.email} </p>
    </div>
  );
}

export default Profile;
```

ì´ˆê¸°ê°’ì´ ëœ° ê²ƒì´ë‹¤.
