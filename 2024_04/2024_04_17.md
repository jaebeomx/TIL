# 2024.04.17 TIL

## 📚 MSW로 백엔드 API 모킹하기

MWS 라이브러리는 서비스 워커를 사용하여 네트워크 호출을 가로채는 API 모킹 라이브러리다. 쉽게 말해, 브라우저에 기생해서 마치 백엔드 API인 척 하면서 프론트엔드의 요청에 가짜 데이터를 응답해주는 녀석이다.

MSW는 이러한 서비스 워커의 능력을 활용하여 웹 개발에 있어서 API 모킹의 수준을 한 단계 올려놓았다고 평가받는다.

#### MSW의 용도

1. 백엔드 API 개발과 프론트엔드 UI 개발이 동시에 진행되는 경우, 백엔드 API 구현이 완료될 때까지 프론트엔드 팀에서 임시로 사용하기 위한 가짜(mock) API를 서비스 워커로 돌리기 위해서
2. 두 번째는 테스트를 실행 시 실제 백엔드 API 네트워크를 호출하는 대신에 훨씬 빠르고 안정적인 가짜 API 서버를 구축하기 위해서

---

#### Mock Service Worker의 특징

기존 API 모킹 라이브러리 대비 MSW의 가장 큰 강점은 모킹이 네트워크 단에서 일어나기 떄문에 프론트엔드 코드를 실제 백엔드 API와 네트워크 통신하는 것과 크게 다르지 않게 작성할 수 있다.
이 말은 나중에 가짜 API를 실제 API로 대체하는 것이 쉽다는 뜻이며 그만큼 프론트엔드 프로젝트의 개발 생산성이 올라가는 것을 의미

뿐만 아니라 라이브러리가 상당히 유연하게 디자인이 되어 있어서 개발용으로 브라우저 환경에서 서비스 워커로 돌리든 테스트용으로 Node.js 환경에서 Jest나 Cypress와 같은 테스트 러너(runner)로 돌리든 동일한 요청 핸들러(handler) 코드를 공유해서 사용할 수 있다. 이 말은 API 모킹을 위해서 작성해야하는 코드를 최소화 할 수 있다는 뜻이며 역시 개발 생산성 뿐만 아니라 유지 보수성 측면에서도 긍정적인 효과를 가져올 것이다.

REST API 모킹과 GraphQL API 모킹을 모두 지원한다는 점도 MSW의 매력적인 부분이다.
