# 2024.05.01 TIL

## 📚 JavaScript

### 🚨 배열

#### ❗️pop

배열 끝 요소를 제거하고, 제거한 요소를 반환한다.

```js
let fruits = ["사과", "오렌지", "배"];
alert(fruits.pop()); // 배열에서 "배"를 제거하고 제거된 요소를 얼럿창에 띄웁니다.
alert(fruits); // 사과, 오렌지
```

---

#### ❗️push

배열 끝에 요소를 추가한다.

```js
let fruits = ["사과", "오렌지"];
fruits.push("배");
alert(fruits); // 사과, 오렌지, 배
```

---

#### ❗️shift

배열의 앞 요소를 제거하고, 제거한 요소를 반환한다.

```js
let fruits = ["사과", "오렌지", "배"];
alert(fruits.shift()); // 배열에서 "사과"를 제거하고 제거된 요소를 얼럿창에 띄운다.
alert(fruits); // 오렌지, 배
```

---

#### ❗️unshift

배열 앞에 요소를 추가한다.

```js
let fruits = ["오렌지", "배"];
fruits.unshift("사과");
alert(fruits); // 사과, 오렌지, 배
```

---

#### 💡push와 unshift는 요소 여러개를 한 번에 더해줄 수도 있다.

```js
let fruits = ["사과"];

fruits.push("오렌지", "배");
fruits.unshift("파인애플", "레몬");

// ["파인애플", "레몬", "사과", "오렌지", "배"]
alert(fruits);
```

---

### 🚨 배열의 내부 동작 원리

배열은 특별한 종류의 객체다.

배열 arr의 요소를 arr[0]처럼 대괄호를 사용해 접근하는 방식은 객체 문법에서 왔다. 다만 배열은 키가 숫자라는 점만 다르다.

숫자형 키를 사용함으로써 배열은 객체 기본 기능 이외에도 순서가 있는 컬렉션을 제어하게 해주는 특별한 메서드를 제공한다.

length라는 프로퍼티도 제공한다. 하지만 어쨌든 배열의 본질은 객체이다.

이렇게 배열은 자바스크립트의 일곱 가지 원시 자료형에 해당하지 않고, 원시 자료형이 아닌 객체형에 속하기 때문에 객체처럼 동작한다.

```js
let fruits = ["바나나"];

let arr = fruits; // 참조를 복사함(두 변수가 같은 객체를 참조)

alert(arr === fruits); // true

arr.push("배"); // 참조를 이용해 배열을 수정합니다.

alert(fruits); // 바나나,배 - 요소가 두 개가 되었습니다.
```

배열을 배열답게 만들어주는 것은 특수 내부 표현방식이다. 자바스크립트 엔진은 배열의 요소를 인접한 메모리 공간에 차례로 저장해 연산 속도를 높인다. 이 방법 이외에도 배열 관련 연산을 더 빠르게 해주는 최적화 기법은 다양하다.

그런데 개발자가 배열을 "순서가 있는 자료의 컬렉션" 처럼 다루지 않고 일반 객체처럼 다루면 이런 기법들이 제대로 동작하지 않는다.

```js
let fruits = []; // 빈 배열을 하나 만듭니다.

fruits[99999] = 5; // 배열의 길이보다 훨씬 큰 숫자를 사용해 프로퍼티를 만듭니다.

fruits.age = 25; // 임의의 이름을 사용해 프로퍼티를 만듭니다.
```

배열은 객체이므로 예시처럼 원하는 프로퍼티를 추가해도 문제가 발생하지 않는다.

그런데 이렇게 코드를 작성하면 자바스크립트 엔진이 배열을 일반 객체처럼 다루게 되어 배열을 다룰 때만 적용되는 최적화 기법이 동작하지 않아 배열 특유의 이점이 사라진다.

#### 💡 배열은 순서가 있는 자료를 저장하는 용도로 만들어진 특수한 자료구조입니다. 배열 내장 메서드들은 이런 용도에 맞게 만들어졌죠. 자바스크립트 엔진은 이런 특성을 고려하여 배열을 신중하게 조정하고, 처리하므로 배열을 사용할 땐 이런 목적에 맞게 사용해 주시기 바랍니다. 임의의 키를 사용해야 한다면 배열보단 일반 객체 {}가 적합한 자료구조일 확률이 높습니다.

---

### 🚨 length 프로퍼티

배열에 무언가 조작을 가하면 length 프로퍼티가 자동으로 갱신된다. length 프로퍼티는 배열 내 요소의 개수가 아니라 가장 큰 인덱스에 1을 더한 값이다.

```js
let fruits = [];
fruits[123] = "사과";

alert(fruits.length); // 124
```

배열을 이렇게 사용하지 않도록 하자.

length 프로퍼티의 또 다른 독특한 특징 중 하나는 쓰기가 가능하다는 점이다.

length의 값을 수동으로 증가시키면 아무 일도 일어나지 않는다. 그런데 값을 감소시키면 배열이 잘린다. 짧아진 배열은 다시 되돌릴 수 없다.

```js
let arr = [1, 2, 3, 4, 5];

arr.length = 2;
alert(arr); // [1,2]

arr.length = 5;
alert(arr[3]); // undefined
```

이런 특징을 이용하면 arr.length= 0;을 사용해 아주 간단하게 배열을 비울 수 있다.

---
